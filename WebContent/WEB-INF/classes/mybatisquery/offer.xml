<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
		  
<mapper namespace="a.b.c.com.agency.dao.OfferDAO">
	
	<select id="offerSelectAll" parameterType="java.lang.String" resultType="OfferVO">
		SELECT 
			   T.TNO       TNO
			 , T.TTITLE    TTITLE
			 , T.TCONTENT  TCONTENT
			 , T.TPRICE    TPRICE
			 , T.TLAT      TLAT
			 , T.TLNG      TLNG
			 , T.MNO       MNO
			 , T.PNO       PNO
			 , TO_CHAR(TO_DATE(T.STARTDATE, 'YYYY/MM/DD HH24:MI'), 'YYYY/MM/DD HH24:MI')  STARTDATE
			 , TO_CHAR(TO_DATE(T.ENDDATE, 'YYYY/MM/DD HH24:MI'), 'YYYY/MM/DD HH24:MI')    ENDDATE
			 , T.DELETEYN  DELETEYN
			 , TO_CHAR(TO_DATE(T.INSERTDATE, 'YYYY/MM/DD'), 'YYYY/MM/DD')         INSERTDATE
			 , TO_CHAR(TO_DATE(T.UPDATEDATE, 'YYYY/MM/DD'), 'YYYY/MM/DD')         UPDATEDATE
			 , M.MID       MID
		FROM   TRADEMAP T, MEMBER M
		WHERE  T.MNO = M.MNO 
		AND    T.MNO = #{mno, jdbcType=VARCHAR}
	</select>
	
	<select id="offerSelect" parameterType="OfferVO" resultType="OfferVO">
		SELECT 
			   T.TNO       TNO
			 , T.TTITLE    TTITLE
			 , T.TCONTENT  TCONTENT
			 , T.TPRICE    TPRICE
			 , T.TLAT      TLAT
			 , T.TLNG      TLNG
			 , T.MNO       MNO
			 , T.PNO       PNO
			 , TO_CHAR(TO_DATE(T.STARTDATE, 'YYYY/MM/DD HH24:MI'), 'YYYY/MM/DD HH24:MI')  STARTDATE
			 , TO_CHAR(TO_DATE(T.ENDDATE, 'YYYY/MM/DD HH24:MI'), 'YYYY/MM/DD HH24:MI')    ENDDATE
			 , T.DELETEYN  DELETEYN
			 , TO_CHAR(TO_DATE(T.INSERTDATE, 'YYYY/MM/DD'), 'YYYY/MM/DD')         INSERTDATE
			 , TO_CHAR(TO_DATE(T.UPDATEDATE, 'YYYY/MM/DD'), 'YYYY/MM/DD')         UPDATEDATE
			 , M.MID       MID
		FROM   TRADEMAP T, MEMBER M
		WHERE  T.MNO = M.MNO 
		AND    T.MNO = #{mno, jdbcType=VARCHAR}	
		AND    T.TNO = #{tno, jdbcType=VARCHAR}	
	</select>
	
	<select id="petSelectAll" parameterType="java.util.HashMap" resultType="Pet">
		SELECT 
			  P.PNO PNO
			, P.PNAME PNAME
			, P.PTYPE PTYPE
			, P.PGENDER PGENDER
			, P.PNEUTRAL PNEUTRAL
			, P.PPHOTO PPHOTO
			, P.PWEIGHT PWEIGHT
			, P.PHOSPITAL PHOSPITAL
			, P.PMEMO PMEMO
			, P.PAGES PAGES
			, P.MNO MNO
			, P.DELETEYN DELETEYN
			, P.INSERTDATE INSERTDATE
			, P.UPDATEDATE UPDATEDATE
		FROM MEMBER M, PET P 
		WHERE M.MNO = P.MNO 
		AND M.MNO = #{mno, jdbcType=VARCHAR} 
		AND P.PNO IN
		<foreach collection="pnoArr" index="index" item="pno" open="(" close=")" separator=",">
			#{pno, jdbcType=VARCHAR}
		</foreach>
	</select>

</mapper>